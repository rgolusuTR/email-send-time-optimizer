{% extends "base.html" %} {% block title %}Dashboard - Siteimprove{% endblock %}
{% block sidebar %}
<nav class="col-md-3 col-lg-2 d-md-block sidebar collapse">
  <div class="position-sticky pt-3">
    <h6
      class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted"
    >
      <span>Filters</span>
    </h6>

    <div class="filter-section">
      <!-- Website Filter -->
      <div class="mb-3">
        <label for="websiteFilter" class="form-label">
          <i class="fas fa-globe me-1"></i>Websites
        </label>
        <select class="form-select" id="websiteFilter" multiple>
          <!-- Options loaded dynamically -->
        </select>
        <div class="form-text">Hold Ctrl/Cmd to select multiple</div>
      </div>

      <!-- Report Type Filter -->
      <div class="mb-3">
        <label for="reportTypeFilter" class="form-label">
          <i class="fas fa-file-alt me-1"></i>Report Types
        </label>
        <select class="form-select" id="reportTypeFilter" multiple>
          <option value="misspellings">Misspellings</option>
          <option value="words_to_review">Words to Review</option>
          <option value="pages_with_misspellings">
            Pages with Misspellings
          </option>
          <option value="misspelling_history">Misspelling History</option>
        </select>
      </div>

      <!-- Date Range Filter -->
      <div class="mb-3">
        <label for="dateRange" class="form-label">
          <i class="fas fa-calendar me-1"></i>Date Range
        </label>
        <input
          type="text"
          class="form-control"
          id="dateRange"
          placeholder="Select date range"
        />
      </div>

      <!-- Period Filter -->
      <div class="mb-3">
        <label for="periodFilter" class="form-label">
          <i class="fas fa-clock me-1"></i>Period
        </label>
        <select class="form-select" id="periodFilter">
          <option value="daily">Daily</option>
          <option value="weekly">Weekly</option>
          <option value="monthly">Monthly</option>
          <option value="yearly">Yearly</option>
        </select>
      </div>

      <!-- Apply Filters Button -->
      <button
        type="button"
        class="btn btn-primary w-100 mb-2"
        id="applyFilters"
      >
        <i class="fas fa-filter me-1"></i>Apply Filters
      </button>

      <!-- Export Button -->
      <button type="button" class="btn btn-export w-100" id="exportDashboard">
        <i class="fas fa-download me-1"></i>Export to Excel
      </button>
    </div>
  </div>
</nav>
{% endblock %} {% block content %}
<div
  class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"
>
  <h1 class="h2">
    <i class="fas fa-chart-line me-2"></i>Siteimprove Dashboard
  </h1>
  <div class="btn-toolbar mb-2 mb-md-0">
    <div class="btn-group me-2">
      <button
        type="button"
        class="btn btn-sm btn-outline-secondary"
        id="refreshData"
      >
        <i class="fas fa-sync-alt me-1"></i>Refresh
      </button>
    </div>
  </div>
</div>

<!-- Loading Indicator -->
<div id="loadingIndicator" class="loading" style="display: none">
  <div class="spinner-border text-primary" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
  <p class="mt-3">Loading dashboard data...</p>
</div>

<!-- Summary Statistics -->
<div id="summaryStats" class="row mb-4">
  <div class="col-md-3">
    <div class="stats-card">
      <h3 id="totalReports">0</h3>
      <p>Total Reports</p>
    </div>
  </div>
  <div class="col-md-3">
    <div class="stats-card">
      <h3 id="totalMisspellings">0</h3>
      <p>Total Misspellings</p>
    </div>
  </div>
  <div class="col-md-3">
    <div class="stats-card">
      <h3 id="totalWordsToReview">0</h3>
      <p>Words to Review</p>
    </div>
  </div>
  <div class="col-md-3">
    <div class="stats-card">
      <h3 id="totalPagesAffected">0</h3>
      <p>Pages Affected</p>
    </div>
  </div>
</div>

<!-- Charts Section -->
<div class="row">
  <!-- Trend Chart -->
  <div class="col-lg-8">
    <div class="card">
      <div class="card-header">
        <h5 class="card-title mb-0">
          <i class="fas fa-chart-line me-2"></i>Trends Over Time
        </h5>
      </div>
      <div class="card-body">
        <div class="chart-container">
          <canvas id="trendChart"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Language Distribution -->
  <div class="col-lg-4">
    <div class="card">
      <div class="card-header">
        <h5 class="card-title mb-0">
          <i class="fas fa-language me-2"></i>Language Distribution
        </h5>
      </div>
      <div class="card-body">
        <div class="chart-container">
          <canvas id="languageChart"></canvas>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row mt-4">
  <!-- Top Misspelled Words -->
  <div class="col-lg-6">
    <div class="card">
      <div class="card-header">
        <h5 class="card-title mb-0">
          <i class="fas fa-chart-bar me-2"></i>Top Misspelled Words
        </h5>
      </div>
      <div class="card-body">
        <div class="chart-container">
          <canvas id="topWordsChart"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Recent Activity -->
  <div class="col-lg-6">
    <div class="card">
      <div
        class="card-header d-flex justify-content-between align-items-center"
      >
        <h5 class="card-title mb-0">
          <i class="fas fa-list me-2"></i>Recent Issues
        </h5>
        <button class="btn btn-sm btn-outline-primary" id="viewAllDetails">
          View All
        </button>
      </div>
      <div class="card-body">
        <div id="recentIssues">
          <!-- Recent issues will be loaded here -->
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Detailed Data Table -->
<div class="row mt-4">
  <div class="col-12">
    <div class="card">
      <div
        class="card-header d-flex justify-content-between align-items-center"
      >
        <h5 class="card-title mb-0">
          <i class="fas fa-table me-2"></i>Detailed Data
        </h5>
        <div class="d-flex">
          <input
            type="text"
            class="form-control form-control-sm me-2"
            id="searchInput"
            placeholder="Search words..."
          />
          <button class="btn btn-sm btn-outline-primary" id="searchButton">
            <i class="fas fa-search"></i>
          </button>
        </div>
      </div>
      <div class="card-body">
        <div class="table-responsive">
          <table class="table table-striped table-hover" id="detailedDataTable">
            <thead class="table-dark">
              <tr>
                <th>Type</th>
                <th>Word</th>
                <th>Suggestion</th>
                <th>Language</th>
                <th>First Detected</th>
                <th>Pages</th>
                <th>Website</th>
                <th>Report Date</th>
              </tr>
            </thead>
            <tbody id="detailedDataBody">
              <!-- Data will be loaded here -->
            </tbody>
          </table>
        </div>

        <!-- Pagination -->
        <nav aria-label="Table pagination">
          <ul class="pagination justify-content-center" id="pagination">
            <!-- Pagination will be generated here -->
          </ul>
        </nav>
      </div>
    </div>
  </div>
</div>

<!-- Error Alert -->
<div
  class="alert alert-danger alert-dismissible fade"
  role="alert"
  id="errorAlert"
  style="display: none"
>
  <i class="fas fa-exclamation-triangle me-2"></i>
  <span id="errorMessage"></span>
  <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
</div>
{% endblock %} {% block extra_js %}
<script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
<script src="{{ url_for('static', filename='js/charts.js') }}"></script>
<script src="{{ url_for('static', filename='js/filters.js') }}"></script>
{% endblock %}
